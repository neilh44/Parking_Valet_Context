(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(2627)}])},1082:function(e,t,a){"use strict";var r=a(5893);a(7294);var s=a(8935),n=a(4195),l=a(3023),i=a(5358),c=a(6050),o=a(8242);t.Z=e=>{let{data:t}=e;if(!t||0===t.length)return(0,r.jsx)("div",{children:"No data available"});let[a,d]=t,u=[{name:"Cars by Color",...d.reduce((e,t,r)=>(e[t]=parseInt(a[r])||0,e),{})}],x=["#ef4444","#3b82f6","#22c55e","#f97316","#8b5cf6","#fbbf24","#14b8a6","#ec4899","#84cc16","#6366f1"];return(0,r.jsx)("div",{className:"w-full max-w-2xl mx-auto p-4",children:(0,r.jsxs)(s.v,{width:600,height:400,data:u,children:[(0,r.jsx)(n.q,{strokeDasharray:"3 3"}),(0,r.jsx)(l.K,{dataKey:"name"}),(0,r.jsx)(i.B,{}),(0,r.jsx)(c.u,{}),d.map((e,t)=>(0,r.jsx)(o.$,{dataKey:e,fill:x[t%x.length],stroke:"White"===e?"#374151":void 0},e))]})})}},2627:function(e,t,a){"use strict";a.r(t);var r=a(5893);a(7294);var s=a(4051);t.default=()=>(0,r.jsx)(s.default,{})},4051:function(e,t,a){"use strict";a.r(t);var r=a(5893),s=a(7294),n=a(1082);t.default=()=>{let[e,t]=(0,s.useState)(""),[a,l]=(0,s.useState)(null),[i,c]=(0,s.useState)(!1),[o,d]=(0,s.useState)([]),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[o,i]);let x=(e,t)=>(null==e?void 0:e[0])&&t?[e[0].map(e=>e.toString()),t]:[],f=async e=>{c(!0);let t={id:Date.now(),type:"user",content:e};d(e=>[...e,t]);try{let t=await fetch("https://valet-server-rnz0tb7x1-neilh44s-projects.vercel.app/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!t.ok)throw Error("API request failed with status ".concat(t.status));let a=await t.json();if(l(a),a.nl_explanation){let e={id:Date.now()+1,type:"system",content:a.nl_explanation,responseData:a};d(t=>[...t,e])}}catch(t){console.error("Error calling backend:",t);let e={id:Date.now(),type:"system",content:"An error occurred. Please try again."};d(t=>[...t,e]),l({error:"An error occurred. Please try again."})}finally{c(!1)}},h=async a=>{a.preventDefault(),e.trim()&&(await f(e),t(""))};return(0,r.jsxs)("div",{className:"flex flex-col h-screen overflow-hidden",children:[(0,r.jsx)("header",{className:"flex-none border-b p-4",children:(0,r.jsx)("h1",{className:"text-xl font-semibold text-green-500",children:"Summon Parking Valet"})}),(0,r.jsxs)("main",{className:"flex-1 overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{ref:u,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map(e=>{var t;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"max-w-2xl mx-auto ".concat("user"===e.type?"text-right":"text-left"),children:(0,r.jsx)("div",{className:"inline-block p-3 rounded-lg ".concat("user"===e.type?"bg-green-100":"bg-gray-100"),children:e.content})}),"system"===e.type&&(null===(t=e.responseData)||void 0===t?void 0:t.query_results)&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n.Z,{data:x(e.responseData.query_results,e.responseData.columns)})})]},e.id)}),i&&(0,r.jsx)("div",{className:"text-center",children:"Loading..."})]}),(0,r.jsx)("form",{onSubmit:h,className:"flex-none border-t p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Ask anything...",className:"flex-1 border rounded-full px-4 py-2"}),(0,r.jsx)("button",{type:"submit",disabled:!e.trim(),className:"bg-green-500 text-white px-4 py-2 rounded-full disabled:opacity-50",children:"Send"})]})})]})]})}}},function(e){e.O(0,[720,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);