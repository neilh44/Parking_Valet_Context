(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[978],{2465:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/journey-chat/index1",function(){return r(5384)}])},1082:function(e,t,r){"use strict";var s=r(5893);r(7294);var l=r(8935),a=r(4195),n=r(3023),i=r(5358),o=r(6050),c=r(8242);t.Z=e=>{let{data:t}=e;if(!t||0===t.length)return(0,s.jsx)("div",{children:"No data available"});let[r,d]=t,u=[{name:"Cars by Color",...d.reduce((e,t,s)=>(e[t]=parseInt(r[s])||0,e),{})}],x=["#ef4444","#3b82f6","#22c55e","#f97316","#8b5cf6","#fbbf24","#14b8a6","#ec4899","#84cc16","#6366f1"];return(0,s.jsx)("div",{className:"w-full max-w-2xl mx-auto p-4",children:(0,s.jsxs)(l.v,{width:600,height:400,data:u,children:[(0,s.jsx)(a.q,{strokeDasharray:"3 3"}),(0,s.jsx)(n.K,{dataKey:"name"}),(0,s.jsx)(i.B,{}),(0,s.jsx)(o.u,{}),d.map((e,t)=>(0,s.jsx)(c.$,{dataKey:e,fill:x[t%x.length],stroke:"White"===e?"#374151":void 0},e))]})})}},5384:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(5893),l=r(7294),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let r=(0,l.forwardRef)(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:c,...d},u)=>(0,l.createElement)("svg",{ref:u,...a,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:`lucide lucide-${n(e)}`,...d},[...t.map(([e,t])=>(0,l.createElement)(e,t)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${e}`,r},o=i("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Image=i("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var c=r(1082),d=()=>{let[e,t]=(0,l.useState)(""),[r,a]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),[d,u]=(0,l.useState)("book"),[x,h]=(0,l.useState)(!1),[m,y]=(0,l.useState)([]),f=(0,l.useRef)(null);(0,l.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[m,n]);let p=e=>e&&Array.isArray(e)?e.map(e=>{var t,r,s,l;return!Array.isArray(e)||e.length<2?["","0"]:(console.log("row[0]?.toString() || ''55555",(null===(t=e[0])||void 0===t?void 0:t.toString())||""),console.log("row[1]?.toString() || '0'444444",(null===(r=e[1])||void 0===r?void 0:r.toString())||"0"),[(null===(s=e[0])||void 0===s?void 0:s.toString())||"",(null===(l=e[1])||void 0===l?void 0:l.toString())||"0"])}):[],g=async e=>{i(!0);let t={id:Date.now(),type:"user",content:e};y(e=>[...e,t]);try{let t=await fetch("https://valet-server-rnz0tb7x1-neilh44s-projects.vercel.app/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!t.ok)throw Error("API request failed with status ".concat(t.status));let r=await t.json();if(a(r),r.nl_explanation){let e={id:Date.now()+1,type:"system",content:r.nl_explanation,responseData:r};y(t=>[...t,e])}}catch(t){console.error("Error calling backend:",t);let e={id:Date.now(),type:"system",content:"An error occurred. Please try again."};y(t=>[...t,e]),a({error:"An error occurred. Please try again."})}finally{i(!1)}},v=async r=>{r.preventDefault(),e.trim()&&(await g(e),t(""))};return(0,s.jsxs)("div",{className:"flex h-screen flex-col bg-white",children:[(0,s.jsxs)("header",{className:"flex flex-col sm:flex-row items-center justify-between border-b p-4 space-y-4 sm:space-y-0",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4 sm:gap-8 w-full sm:w-auto",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-green-500",children:"Summon Parking Valet"}),(0,s.jsx)("div",{className:"flex border rounded-md w-full sm:w-auto",children:(0,s.jsx)("button",{className:"flex-1 sm:flex-none px-4 py-2 ".concat("book"===d?"bg-gray-100":""),onClick:()=>u("book"),children:"AI Chat Assistant"})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:(0,s.jsx)(o,{className:"h-5 w-5"})}),(0,s.jsx)("button",{className:"sm:hidden p-2 hover:bg-gray-100 rounded-full",onClick:()=>h(!x),children:(0,s.jsx)(Image,{className:"h-5 w-5"})})]})]}),(0,s.jsx)("main",{className:"flex flex-1 overflow-hidden relative",children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col ".concat("chat"===d?"block":"hidden sm:block"),children:[(0,s.jsxs)("div",{ref:f,className:"flex-1 overflow-y-auto p-4 space-y-4 max-h-[calc(100vh-250px)] min-h-[200px]",children:[m.map(e=>{var t,r,a,n,i;return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)("div",{className:"max-w-2xl mx-auto ".concat("user"===e.type?"text-right":"text-left"),children:(0,s.jsx)("div",{className:"inline-block p-3 rounded-lg ".concat("user"===e.type?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.content})}),"system"===e.type&&(null===(t=e.responseData)||void 0===t?void 0:t.query_results)&&(0,s.jsx)("div",{className:"mt-4",children:e.responseData.query_results.length>2?(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:(null===(a=e.responseData.query_results[0])||void 0===a?void 0:null===(r=a[0])||void 0===r?void 0:r.toString())||""}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(null===(i=e.responseData.query_results[0])||void 0===i?void 0:null===(n=i[1])||void 0===n?void 0:n.toString())||""})]})}):(0,s.jsx)(c.Z,{data:p(e.responseData.query_results)})})]},e.id)}),n&&(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading..."})]}),(0,s.jsx)("form",{onSubmit:v,className:"border-t p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Ask anything...",className:"flex-1 border rounded-full px-4 py-2"}),(0,s.jsx)("button",{type:"submit",disabled:!e.trim(),className:"bg-green-500 text-white px-4 py-2 rounded-full disabled:opacity-50",children:"Send"})]})})]})})]})}}},function(e){e.O(0,[720,774,888,179],function(){return e(e.s=2465)}),_N_E=e.O()}]);